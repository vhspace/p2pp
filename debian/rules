#!/usr/bin/make -f

export PYBUILD_NAME=p2pp
export DH_VERBOSE=1
export PYBUILD_SYSTEM=distutils
export PYBUILD_DISABLE=test

%:
	dh $@ --with python3 --buildsystem=pybuild

override_dh_auto_clean:
	python3 setup.py clean -a
	rm -rf build/ *.egg-info

override_dh_auto_test:
	# Skip tests during package build

override_dh_auto_install:
	python3 setup.py install --root=$(CURDIR)/debian/p2pp --install-layout=deb
	rm -rf debian/*/usr/lib/python*/dist-packages/__pycache__